# æ¨¡å— 02ï¼šæµ‹è¯•æ‰§è¡Œè¯¦ç»†æµç¨‹

## ç›®å½•

- [æ¨¡å— 02ï¼šæµ‹è¯•æ‰§è¡Œè¯¦ç»†æµç¨‹](#æ¨¡å—-02æµ‹è¯•æ‰§è¡Œè¯¦ç»†æµç¨‹)
  - [ç›®å½•](#ç›®å½•)
  - [è¾“å…¥å‚æ•°](#è¾“å…¥å‚æ•°)
  - [æ‰§è¡Œæ¸…å•](#æ‰§è¡Œæ¸…å•)
    - [æ­¥éª¤ 1ï¼šå‡†å¤‡é˜¶æ®µ](#æ­¥éª¤-1å‡†å¤‡é˜¶æ®µ)
    - [æ­¥éª¤ 2ï¼šæ‰§è¡Œæœç´¢](#æ­¥éª¤-2æ‰§è¡Œæœç´¢)
    - [æ­¥éª¤ 3ï¼šç”Ÿæˆç­”æ¡ˆ](#æ­¥éª¤-3ç”Ÿæˆç­”æ¡ˆ)
    - [æ­¥éª¤ 4ï¼šä¿å­˜ç»“æœ](#æ­¥éª¤-4ä¿å­˜ç»“æœ)
    - [Claude åˆ†æç­”æ¡ˆ](#claude-åˆ†æç­”æ¡ˆ)
    - [æ—¶é—´ç»Ÿè®¡](#æ—¶é—´ç»Ÿè®¡)
    - [æ­¥éª¤ 5ï¼šå¾ªç¯æ§åˆ¶](#æ­¥éª¤-5å¾ªç¯æ§åˆ¶)
  - [è¾“å‡ºæ ¼å¼](#è¾“å‡ºæ ¼å¼)

---

## è¾“å…¥å‚æ•°

ä»ä¸»å¾ªç¯æ¥æ”¶ï¼š
```json
{
  "test_case": {
    "id": "T1-freshness-7days",
    "name": "ç¡¬7å¤©çª—å£ï¼ˆæ–°é—»/å…¬å‘Šï¼‰",
    "category": "æ—¶æ•ˆæ€§",
    "prompt": "è¯·æ€»ç»“è¿‡å»7å¤©å†…...",
    "judgment_criteria": [...],
    "max_score": 10
  },
  "tool_config": {
    "id": "grok-search",
    "name": "Grok Search MCP",
    "tool_name": "mcp__grok-search__web_search"
  },
  "current_index": 1,
  "total_tests": 12
}
```

---

## æ‰§è¡Œæ¸…å•

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é€é¡¹å®Œæˆå•ä¸ªæµ‹è¯•çš„æ‰§è¡Œã€‚**æ¯å®Œæˆä¸€æ­¥ï¼Œåœ¨æ€è€ƒè¿‡ç¨‹ä¸­æ ‡è®°ä¸ºå·²å®Œæˆ**ã€‚

### æ­¥éª¤ 1ï¼šå‡†å¤‡é˜¶æ®µ

- [ ] åˆå§‹åŒ–ç»“æœå¯¹è±¡
  ```javascript
  test_result = {
    "test_case_id": test_case.id,
    "test_case_name": test_case.name,
    "category": test_case.category,
    "tool_used": tool_config.id,
    "tool_name": tool_config.name,
    "status": "running",
    "current_index": current_index,
    "total_tests": total_tests
  }
  ```

- [ ] æ˜¾ç¤ºå¼€å§‹ä¿¡æ¯
  ```
  ğŸ”„ [{current_index}/{total_tests}] {test_case.name} ({tool_config.name})
  ```

- [ ] åˆ›å»ºæˆ–æ‰“å¼€ç­”å·æ–‡ä»¶
  ```
  ç­”å·æ–‡ä»¶è·¯å¾„: {session_dir}/answers/{tool_id}.md

  å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶å¤´ï¼š
    # {Tool Name} æµ‹è¯•ç­”å·
    **ç”Ÿæˆæ—¶é—´**: {timestamp}
    **å·¥å…·æ ‡è¯†**: {tool_id}
    ---

  å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œå‡†å¤‡è¿½åŠ å†…å®¹
  ```

---

### æ­¥éª¤ 2ï¼šæ‰§è¡Œæœç´¢

- [ ] è®°å½•æœç´¢å¼€å§‹æ—¶é—´
  ```bash
  ä½¿ç”¨ Bash å·¥å…·ï¼š
  python utils/timestamp.py

  æˆ–ä½¿ç”¨ JavaScript:
  search_start = Date.now()
  ```

- [ ] æ„å»ºæœç´¢æŸ¥è¯¢
  ```
  ä» test_case.prompt æå–å…³é”®ä¿¡æ¯
  æ„å»ºé€‚åˆæœç´¢å·¥å…·çš„æŸ¥è¯¢å­—ç¬¦ä¸²

  ç¤ºä¾‹ï¼š
    prompt: "è¯·æ€»ç»“è¿‡å»7å¤©å†…ï¼ŒAIé¢†åŸŸå‘ç”Ÿçš„3æ¡æœ€é‡è¦æ›´æ–°"
    â†’ æŸ¥è¯¢: "AIæœ€æ–°æ›´æ–° è¿‡å»7å¤© 2026"

  æç¤ºï¼š
    - æ—¶æ•ˆæ€§æµ‹è¯•ï¼šåŠ å…¥æ—¶é—´å…³é”®è¯å’Œå½“å‰å¹´ä»½
    - å‡†ç¡®åº¦æµ‹è¯•ï¼šä½¿ç”¨ç²¾ç¡®çš„äº§å“åç§°æˆ–æŠ€æœ¯æœ¯è¯­
    - æŠ—å¹»è§‰æµ‹è¯•ï¼šç›´æ¥ä½¿ç”¨é—®é¢˜ä¸­çš„å…³é”®è¯
  ```

- [ ] è°ƒç”¨æœç´¢å·¥å…·
  ```
  å¦‚æœ tool_config.tool_name == "mcp__grok-search__web_search":
    è°ƒç”¨ï¼šmcp__grok-search__web_search
    å‚æ•°ï¼š
      query: æ„å»ºçš„æŸ¥è¯¢å­—ç¬¦ä¸²
      min_results: 3
      max_results: 10

  å¦‚æœ tool_config.tool_name == "WebSearch":
    è°ƒç”¨ï¼šWebSearch
    å‚æ•°ï¼š
      query: æ„å»ºçš„æŸ¥è¯¢å­—ç¬¦ä¸²
  ```

- [ ] è®°å½•æœç´¢å®Œæˆæ—¶é—´
  ```bash
  search_end = Date.now()
  ```

- [ ] ä¿å­˜åŸå§‹æœç´¢ç»“æœ
  ```javascript
  test_result.search_start = search_start
  test_result.search_end = search_end
  test_result.search_duration = (search_end - search_start) / 1000  // ç§’
  test_result.raw_search_results = æœç´¢å·¥å…·è¿”å›çš„JSON
  test_result.result_count = ç»“æœæ•°é‡
  ```

- [ ] é”™è¯¯å¤„ç†
  ```
  å¦‚æœæœç´¢å¤±è´¥ï¼š
    test_result.status = "failed"
    test_result.error = é”™è¯¯ä¿¡æ¯
    â†’ è·³åˆ°æ­¥éª¤ 4ï¼ˆä¿å­˜ç»“æœï¼‰
  ```

---

### æ­¥éª¤ 3ï¼šç”Ÿæˆç­”æ¡ˆ

**å…³é”®**ï¼šä½ éœ€è¦åŸºäºæœç´¢ç»“æœï¼Œç”Ÿæˆå®Œæ•´çš„è‡ªç„¶è¯­è¨€ç­”æ¡ˆã€‚

- [ ] åˆ†ææœç´¢ç»“æœ
  ```
  - æå–ç›¸å…³ä¿¡æ¯
  - éªŒè¯ä¿¡æ¯çš„æ—¶æ•ˆæ€§ï¼ˆå¦‚é€‚ç”¨ï¼‰
  - æ£€æŸ¥æ¥æºå¯é æ€§
  - è¯†åˆ«æ½œåœ¨é—®é¢˜ï¼ˆå¦‚æ—¥æœŸä¸åŒ¹é…ã€ä¿¡æ¯çŸ›ç›¾ç­‰ï¼‰
  ```

- [ ] ç”Ÿæˆç»“æ„åŒ–ç­”æ¡ˆ
  ```
  æ ¹æ® test_case.prompt çš„è¦æ±‚æ ¼å¼åŒ–ç­”æ¡ˆ
  å‚è€ƒ"ç­”æ¡ˆç”ŸæˆæŒ‡å—"éƒ¨åˆ†çš„æœ€ä½³å®è·µ

  ç­”æ¡ˆè¦æ±‚ï¼š
    - ç›´æ¥å›ç­”é—®é¢˜
    - æä¾›å¿…è¦çš„è¯æ®å’Œæ¥æº
    - å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œè¯šå®è¯´æ˜
    - ä¿æŒå®¢è§‚ä¸­ç«‹
  ```

- [ ] è®°å½•ç­”æ¡ˆå®Œæˆæ—¶é—´
  ```bash
  answer_end = Date.now()
  test_result.answer_end = answer_end
  test_result.answer_duration = (answer_end - search_end) / 1000  // ç§’
  test_result.total_duration = (answer_end - search_start) / 1000  // ç§’
  test_result.answer = ç”Ÿæˆçš„å®Œæ•´ç­”æ¡ˆ
  ```

- [ ] æ›´æ–°çŠ¶æ€
  ```javascript
  test_result.status = "completed"
  ```

---

### æ­¥éª¤ 4ï¼šä¿å­˜ç»“æœ

- [ ] è¿½åŠ é—®é¢˜å’Œç­”æ¡ˆåˆ°ç­”å·æ–‡ä»¶
  ```bash
  ä½¿ç”¨ Bash å·¥å…·çš„ cat >> è¿½åŠ å†…å®¹ï¼š

  cat >> "{session_dir}/answers/{tool_id}.md" << 'EOF'

  ## é—®é¢˜ {åºå·}: [{test_case_id}] {test_case_name}

  **åˆ†ç±»**: {category}
  **é—®é¢˜æè¿°**:
  ```
  {test_case.prompt}
  ```

  ### åŸå§‹æœç´¢ç»“æœ

  **æœç´¢æŸ¥è¯¢**: {æ„å»ºçš„æŸ¥è¯¢å­—ç¬¦ä¸²}
  **ç»“æœæ•°é‡**: {result_count}
  **æœç´¢å¼€å§‹æ—¶é—´**: {ISO8601æ ¼å¼æ—¶é—´æˆ³}
  **æœç´¢å®Œæˆæ—¶é—´**: {ISO8601æ ¼å¼æ—¶é—´æˆ³}
  **æœç´¢è€—æ—¶**: {X.XX}ç§’

  <details>
  <summary>å®Œæ•´ JSON æ•°æ®ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary>

  ```json
  {raw_search_results çš„å®Œæ•´ JSON}
  ```

  </details>

  ### Claude åˆ†æç­”æ¡ˆ

  **ç­”æ¡ˆç”Ÿæˆå¼€å§‹**: {ISO8601æ ¼å¼æ—¶é—´æˆ³}
  **ç­”æ¡ˆç”Ÿæˆå®Œæˆ**: {ISO8601æ ¼å¼æ—¶é—´æˆ³}
  **åˆ†æè€—æ—¶**: {X.XX}ç§’

  {ç”Ÿæˆçš„å®Œæ•´è‡ªç„¶è¯­è¨€ç­”æ¡ˆ}

  ### æ—¶é—´ç»Ÿè®¡

  | é˜¶æ®µ | è€—æ—¶ |
  |------|------|
  | æœç´¢é˜¶æ®µ | {X.XX}ç§’ |
  | åˆ†æé˜¶æ®µ | {X.XX}ç§’ |
  | **æ€»è€—æ—¶** | **{X.XX}ç§’** |

  ---

  EOF
  ```

- [ ] è¿½åŠ ç´¢å¼•åˆ°æ—¥å¿—æ–‡ä»¶
  ```bash
  ä½¿ç”¨ Bash å·¥å…·çš„ cat >> è¿½åŠ  JSON è¡Œï¼š

  cat >> "{session_dir}/_test_log.jsonl" << 'EOF'
  {å®Œæ•´çš„ test_result JSON å¯¹è±¡ï¼Œå•è¡Œæ ¼å¼}
  EOF
  ```

- [ ] æ˜¾ç¤ºè¿›åº¦
  ```
  âœ… [{current_index}/{total_tests}] {test_case_id} ({tool}): ç­”æ¡ˆå·²ä¿å­˜ | {total_duration}ç§’
  ```

---

### æ­¥éª¤ 5ï¼šå¾ªç¯æ§åˆ¶

**âš ï¸ å…³é”®ï¼šæ­¤æ­¥éª¤å†³å®šæ˜¯å¦ç»§ç»­ä¸‹ä¸€ä¸ªæµ‹è¯•ï¼Œä¸¥ç¦æš‚åœ**

- [ ] æ£€æŸ¥æ˜¯å¦æœ‰æ›´å¤šæµ‹è¯•
  ```
  å¦‚æœ current_index < total_tests:
    â†’ ç«‹å³è¿”å›æ­¥éª¤ 1ï¼Œè‡ªåŠ¨å¼€å§‹ä¸‹ä¸€ä¸ªæµ‹è¯•
    â†’ ä¸è¦æš‚åœã€ä¸è¦è¯¢é—®ç”¨æˆ·
    â†’ ç›´æ¥åŠ è½½ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¹¶æ‰§è¡Œ

  å¦‚æœå½“å‰å·¥å…·çš„æ‰€æœ‰æµ‹è¯•å·²å®Œæˆ (current_index == total_tests):
    â†’ æ›´æ–°ç­”å·æ–‡ä»¶çš„æ±‡æ€»ç»Ÿè®¡
    â†’ å¦‚æœè¿˜æœ‰å…¶ä»–å·¥å…·çš„æµ‹è¯•æœªå¼€å§‹ï¼Œç«‹å³è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå·¥å…·
    â†’ ä¸è¦æš‚åœ

  å¦‚æœæ‰€æœ‰æµ‹è¯•å·²å®Œæˆ:
    â†’ è‡ªåŠ¨è¿›å…¥é˜¶æ®µä¸‰ï¼ˆç»“æœåˆ†æï¼‰
  ```

- [ ] æ›´æ–°ç­”å·æ±‡æ€»ç»Ÿè®¡ï¼ˆä»…åœ¨å·¥å…·çš„æ‰€æœ‰æµ‹è¯•å®Œæˆæ—¶ï¼‰
  ```bash
  cat >> "{session_dir}/answers/{tool_id}.md" << 'EOF'

  ## æ±‡æ€»ç»Ÿè®¡

  - **æ€»æµ‹è¯•æ•°**: {count}
  - **æ€»è€—æ—¶**: {X.XX}ç§’
  - **å¹³å‡è€—æ—¶**: {X.XX}ç§’/é¢˜
  - **æœ€å¿«å“åº”**: {X.XX}ç§’ ({test_case_id})
  - **æœ€æ…¢å“åº”**: {X.XX}ç§’ ({test_case_id})

  EOF
  ```

---

## è¾“å‡ºæ ¼å¼

æ‰§è¡Œå®Œæˆåï¼Œtest_result å¯¹è±¡åŒ…å«ï¼š

```json
{
  "test_case_id": "T1-freshness-7days",
  "test_case_name": "ç¡¬7å¤©çª—å£ï¼ˆæ–°é—»/å…¬å‘Šï¼‰",
  "category": "æ—¶æ•ˆæ€§",
  "tool_used": "grok-search",
  "tool_name": "Grok Search MCP",
  "current_index": 1,
  "total_tests": 12,
  "search_start": 1738410615123,
  "search_end": 1738410618456,
  "answer_end": 1738410621234,
  "search_duration": 3.33,
  "answer_duration": 2.78,
  "total_duration": 6.11,
  "status": "completed",
  "answer": "æ ¹æ®æœç´¢ç»“æœï¼Œè¿‡å»7å¤©å†…...",
  "raw_search_results": {...},
  "result_count": 6
}
```

æ—¶é—´æˆ³è¯´æ˜ï¼ˆæ¯«ç§’ï¼‰ï¼š
- `search_start`: æœç´¢å¼€å§‹
- `search_end`: æœç´¢å®Œæˆï¼ˆ= ç­”æ¡ˆç”Ÿæˆå¼€å§‹ï¼‰
- `answer_end`: ç­”æ¡ˆç”Ÿæˆå®Œæˆ

è€—æ—¶è®¡ç®—ï¼ˆç§’ï¼‰ï¼š
- `search_duration`: æœç´¢è€—æ—¶
- `answer_duration`: åˆ†æè€—æ—¶
- `total_duration`: æ€»è€—æ—¶
